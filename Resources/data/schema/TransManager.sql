<SaveTrans>
INSERT INTO SAT010T (DD_SALE, CD_STORE, NO_POS, NO_TRXN, SQ_TRXN, VC_CONT, ID_USER, SQ_SHIFT)
VALUES(@DD_SALE, @CD_STORE, @NO_POS, @NO_TRXN, @SQ_TRXN, @VC_CONT, @ID_USER, @SQ_SHIFT)
</SaveTrans>

<SaveTransState>
INSERT INTO SAT011T (DD_SALE, CD_STORE, NO_POS, NO_TRXN, FG_TRXN, FG_CANC, ID_USER, DD_TIME, FG_PRS)
VALUES (@DD_SALE, @CD_STORE, @NO_POS, @NO_TRXN, @FG_TRXN, @FG_CANC, @ID_USER, @DD_TIME, 'N')
</SaveTransState>

-- 당일 POS 매출 합계
<SAT300TSelectItem>
SELECT CAST(AM_ITEM AS TEXT) AS AM_ITEM
, CT_ITEM
FROM SAT300T
WHERE	DD_SALE = @DD_SALE AND
		CD_STORE = @CD_STORE AND
		NO_POS = @NO_POS AND
		ID_ITEM = @ID_ITEM
LIMIT 1;		
</SAT300TSelectItem>
<SAT300TInserUpdate>
-- SAT300TInserUpdate 항목
INSERT OR REPLACE INTO SAT300T
(
	DD_SALE, 
	CD_STORE, 
	NO_POS, 
	ID_ITEM, 
	AM_ITEM, 
	CT_ITEM)
VALUES (
	@DD_SALE, 
	@CD_STORE, 
	@NO_POS, 
	@ID_ITEM, 
	@AM_ITEM, 
	@CT_ITEM);
</SAT300TInserUpdate>

--- 계산원별 부분 매출 합계 (계산원 정산하기전까지 매출합)
<SAT301TSelectItem>
SELECT CAST(AM_ITEM AS TEXT) AS AM_ITEM
, CT_ITEM
FROM SAT301T
WHERE	DD_SALE = @DD_SALE AND
		CD_STORE = @CD_STORE AND
		NO_POS = @NO_POS AND
		ID_USER = @ID_USER AND
		ID_ITEM = @ID_ITEM
LIMIT 1;		
</SAT301TSelectItem>

<SAT301TInserUpdate>
-- SAT301TInserUpdate 항목
INSERT OR REPLACE INTO SAT301T
(
	DD_SALE, 
	CD_STORE, 
	NO_POS, 
	ID_USER, 
	ID_ITEM, 
	AM_ITEM, 
	CT_ITEM)
VALUES (
	@DD_SALE, 
	@CD_STORE, 
	@NO_POS, 
	@ID_USER, 
	@ID_ITEM, 
	@AM_ITEM, 
	@CT_ITEM);
</SAT301TInserUpdate>

--- 계산원별 정산 매출 정보 저장
<SAT302TSelectItem>
SELECT CAST(AM_ITEM AS TEXT) AS AM_ITEM
, CT_ITEM
FROM SAT302T
WHERE	DD_SALE = @DD_SALE AND
		CD_STORE = @CD_STORE AND
		NO_POS = @NO_POS AND
		ID_USER = @ID_USER AND
		SQ_SHIFT = @SQ_SHIFT AND
		ID_ITEM = @ID_ITEM		
LIMIT 1;		
</SAT302TSelectItem>

<SAT302TInsertUpdate>
-- SAT302TInserUpdate 항목
INSERT OR REPLACE INTO SAT302T
(
	DD_SALE, 
	CD_STORE, 
	NO_POS, 
	ID_USER, 
	SQ_SHIFT,
	ID_ITEM, 	
	AM_ITEM, 
	CT_ITEM)
VALUES (
	@DD_SALE, 
	@CD_STORE, 
	@NO_POS, 
	@ID_USER, 
	@SQ_SHIFT,
	@ID_ITEM, 
	@AM_ITEM, 
	@CT_ITEM);
</SAT302TInsertUpdate>

-- 품번별 매출 집계
<SAT303TSelectItem>
SELECT CAST(AM_SALE AS TEXT) AS AM_SALE
, CAST(CT_SALE AS TEXT) AS CT_SALE
, CAST(AM_RETN AS TEXT) AS AM_RETN
, CAST(CT_RETN AS TEXT) AS CT_RETN
, NM_CLASS
FROM SAT303T
WHERE	DD_SALE = @DD_SALE AND
		CD_STORE = @CD_STORE AND
		NO_POS = @NO_POS AND
		CD_CLASS = @CD_CLASS
LIMIT 1;
</SAT303TSelectItem>

-- 품번별 매출 집계 저장
<SAT303TInsertUpdate>
INSERT OR REPLACE INTO SAT303T
(
	DD_SALE, 
	CD_STORE, 
	NO_POS, 
	CD_CLASS,
	NM_CLASS,
	CT_SALE,
	AM_SALE,
	CT_RETN,
	AM_RETN)
VALUES (
	@DD_SALE, 
	@CD_STORE, 
	@NO_POS, 
	@CD_CLASS,
	@NM_CLASS,
	@CT_SALE,
	@AM_SALE,
	@CT_RETN,
	@AM_RETN);
</SAT303TInsertUpdate>

-- 카다사별집계
<SAT304TSelectItem>
SELECT		NM_CARD
,			CAST(CT_SALE AS TEXT) AS CT_SALE
,			CAST(AM_SALE AS TEXT) AS AM_SALE
,			CAST(AM_SENR AS TEXT) AS AM_SENR
,			CAST(CT_RETN AS TEXT) AS CT_RETN
,			CAST(AM_RETN AS TEXT) AS AM_RETN
,			CAST(AM_RENR AS TEXT) AS AM_RENR
FROM 	SAT304T
WHERE   DD_SALE = @DD_SALE 
		AND CD_STORE = @CD_STORE 
		AND NO_POS = @NO_POS
		AND CD_CARD = @CD_CARD;
</SAT304TSelectItem>

<SAT304TInserUpdate>
INSERT OR REPLACE INTO SAT304T
(
	DD_SALE, 
	CD_STORE, 
	NO_POS, 
	CD_CARD,
	NM_CARD,
	CT_SALE,
	AM_SALE,
	AM_SENR,
	CT_RETN,
	AM_RETN,
	AM_RENR)
VALUES (
	@DD_SALE, 
	@CD_STORE, 
	@NO_POS, 
	@CD_CARD,
	@NM_CARD,
	@CT_SALE,
	@AM_SALE,
	@AM_SENR,
	@CT_RETN,
	@AM_RETN,
	@AM_RENR
);
</SAT304TInserUpdate>

--- 반품시, 영수증번호 확인
<GetSaleTrxnHeader>
SELECT VC_CONT
FROM SAT010T
WHERE	CD_STORE = @CD_STORE AND
		NO_POS = @NO_POS AND
		DD_SALE = @DD_SALE AND 
		NO_TRXN = @NO_TRXN AND
		SQ_TRXN = '000' AND 
		VC_CONT LIKE '100%' LIMIT 1;
</GetSaleTrxnHeader>

--- 반품시, 원거래BASKET HEADER 다시저장
<SaveSaleTrxnHeader>
UPDATE SAT010T
SET VC_CONT = @VC_CONT
WHERE	CD_STORE = @CD_STORE AND
		NO_POS = @NO_POS AND
		DD_SALE = @DD_SALE AND 
		NO_TRXN = @NO_TRXN AND
		SQ_TRXN = '000';
</SaveSaleTrxnHeader>

<SelectNmclassByCdClass>
-- 작성일: 10.03
-- 작성자: TCL
-- 품번명가져오기
-- 반품일때 집계 테이블에 없을때
SELECT NM_CLASS
FROM BSM061T
WHERE CD_CLASS = @CD_CLASS AND FG_CLASS = @FG_CLASS;
</SelectNmclassByCdClass>